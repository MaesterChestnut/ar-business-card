<html>
  <head>
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/nikolaymihaylov/AR.js/dev/aframe/build/aframe-ar.js"></script>
  <script>
    AFRAME.registerComponent('registerevents', {
      init: function() {
        var marker = this.el;
        // Make the element emit events when found and when lost.
  			marker.setAttribute('emitevents', 'true');
  
        marker.addEventListener('markerFound', () => {
  				console.log('markerFound');
  				// TODO: Add your own code here to react to the marker being found.
  			});
  
  			marker.addEventListener('markerLost', function() {
  				console.log('markerLost');
  				// TODO: Add your own code here to react to the marker being lost.
  			});
      }
    });
  </script>
  </head>
  <body>
    <a-scene artoolkit>
      <a-assets>
        <a-asset-item id="gman" src="hollow_mask/scene.gltf"></a-asset-item>
      </a-assets>

      <!--a-box position="0 0 1" height="1" width="1"></a-box-->
      <a-entity geometry id='gman-id' position="0 0 1" gltf-model="#gman"
        scale="2 2 2" >
        <a-animation attribute="scale"
                     begin="appear" to="5 5 5" dur="6000"></a-animation>
      </a-entity>
      <!--a-marker-camera preset='custom' type='pattern' url="https://s3.amazonaws.com/aws-website-chestnutmeansbusiness-l2ucx/panther-pattern.patt"></a-marker-camera-->
      
      <a-marker-camera preset='hiro' emitevents='true'>
      <a-marker preset='hiro' registerevents>
      </a-marker>
      </a-marker-camera>

    </a-scene>
    <script>
      document.addEventListener('keydown', (e) => {
        if(event.keyCode == 37) {
          document.getElementById('gman-id').emit('appear');
        }
      });
      //let marker = document.querySelector('a-marker').object3D;

      /*let arContext = new THREEx.ArToolkitContext();
      var markerControls = new THREEx.ArMarkerControls(arContext, marker, {
        type: 'pattern',
        patternUrl: THREEx.ArToolkitContext.baseURL + 'examples/marker-training/examples/pattern-files/pattern-hiro.patt'
      });

      marker.addEventListener('markerFound', (e) => {
        console.log('At last! ', e);
      })*/
     // console.log(marker);
     /* console.log('Mesh: ', document.querySelector('a-entity').object3DMap);
      document.querySelector('a-entity').setObject3D('mesh', new THREE.Mesh());
      console.log('Mesh: ', document.querySelector('a-entity').object3DMap);
      let mesh = document.querySelector('a-entity').object3DMap.mesh;
      let renderer = new THREE.WebGLRenderer();
      let camera	= new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.01, 1000)
      let domEvents = new THREEx.DomEvents(camera, renderer.domElement);
      domEvents.addEventListener(mesh, 'click', (evt) => {
        console.log('Camera click ', evt);
      }, false);*/

      //console.log(document.querySelector('a-marker-camera').components.position);
    </script>
  </body>
</html>
